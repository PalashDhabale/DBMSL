create table Borrower(
    roll INT,
    name varchar2(20),
    doi DATE,
    nob varchar2(20),
    status char(1) DEFAULT 'i'
);
create table Fine(
    roll INT,
    dt DATE,
    amount INT
);

DECLARE
    roll1 INT;
    name1 varchar2(20);
    doi1 DATE;
    nob1 varchar2(20);
BEGIN
    roll1:=:roll_NO;
    name1:=:name_of_student;
    doi1:=:Date_of_issue_mm_dd_yyyy;
    nob1:=:Name_of_book;
INSERT INTO Borrower(roll, name, doi, nob) VALUES(roll1, name1, doi1, nob1);
DBMS_OUTPUT.put_line('Book issued');
END


DECLARE
    roll1 INT;
    doi1 DATE;
    nob1 varchar2(20);
    days_passed INT;
    fine INT;
BEGIN
    roll1 := :rollNo;
    SELECT doi, nob INTO doi1, nob1 FROM Borrower WHERE roll = roll1;
    days_passed := SYSDATE - doi1;
    dbms_output.put_line('Book Returned in '||days_passed||' days');
    IF days_passed > 30 THEN
        dbms_output.put_line('per day fine 50');
        fine := days_passed * 50;
    ELSIF days_passed > 15 THEN
        dbms_output.put_line('per day fine 5');
        fine := days_passed * 5;
    ELSE
        dbms_output.put_line('no fine');
        fine := days_passed * 0;
    END IF;
    INSERT INTO fine VALUES (roll1, SYSDATE, fine);
    UPDATE Borrower SET STATUS = 'R' WHERE roll = roll1 AND STATUS = 'i';
    -- dbms_output.put_line(days_passed || nob1);
    dbms_output.put_line('Total Fine :'||fine);
END;



    

